{% extends 'ostatus/template.html' %}
{% load i18n %}
{% load utilities %}
{% load markdown %}

{% block title %}
{% if not request.user.is_authenticated %}
{% trans "Log in to " %}
{% else %}
{% trans "Error following from " %}
{% endif %}
{% endblock %}

{% block heading %}
{% if not request.user.is_authenticated %}
Let's log in first...
{% else %}
Uh oh... 
{% endif %}
{% endblock %}

{% block content %}
<div class="block">
    {% if not request.user.is_authenticated %}
    <div class="navbar-item">

      <div class="columns">
          <div class="column">
              <form name="login" method="post" action="{% url 'login' %}?next={{ request.path }}?acct={{ account }}">
                  {% csrf_token %}
                  <div class="columns is-variable is-1">
                      <div class="column">
                          <label class="is-sr-only" for="id_localname">{% trans "Username:" %}</label>
                          <input type="text" name="localname" maxlength="150" class="input" required="" id="id_localname" placeholder="{% trans 'username' %}">
                      </div>
                      <div class="column">
                          <label class="is-sr-only" for="id_password">{% trans "Password:" %}</label>
                          <input type="password" name="password" maxlength="128" class="input" required="" id="id_password" placeholder="{% trans 'password' %}">
                          <p class="help"><a href="{% url 'password-reset' %}">{% trans "Forgot your password?" %}</a></p>
                      </div>
                      <div class="column is-narrow">
                          <button class="button is-primary" type="submit">{% trans "Log in" %}</button>
                      </div>
                  </div>
              </form>
          </div>
      </div>

  </div>
    {% elif error == 'ostatus_subscribe' %}
    <div class="notification is-warning">
        <p>{% blocktrans %}Something went wrong trying to follow <strong>{{ account }}</strong>{% endblocktrans %}</p>
        <p>{% trans 'Check you have the correct username before trying again.' %}</p>
    </div>
    {% endif %}
</div>
{% endblock %}
