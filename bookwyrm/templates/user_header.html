{% load humanize %}
{% load fr_display %}
<div class="block">
    <div class="level">
        <h2 class="title">User Profile</h2>
        {% if is_self %}
        <div class="level-right">
            <a href="/user-edit/" class="edit-link">edit
                <span class="icon icon-pencil">
                    <span class="is-sr-only">Edit profile</span>
                </span>
            </a>
        </div>
        {% endif %}
    </div>

    <div class="columns">
        <div class="column is-narrow">
            <div class="media">
                <div class="media-left">
                    {% include 'snippets/avatar.html' with user=user large=True %}
                </div>
                <div class="media-content">
                    <p>{% if user.name %}{{ user.name }}{% else %}{{ user.localname }}{% endif %}</p>
                    <p>{{ user.username }}</p>
                    <p>Joined {{ user.created_date | naturaltime }}</p>
                    <p>
                        <a href="/user/{{ user|username }}/followers">{{ user.followers.count }} follower{{ user.followers.count | pluralize }}</a>,
                        <a href="/user/{{ user|username }}/following">{{ user.following.count }} following</a></p>
                </div>
            </div>
        </div>

        <div class="column">
            {% if user.summary %}
            <blockquote><span class="icon icon-quote-open"></span>{{ user.summary | safe }}</blockquote>
            {% endif %}
        </div>
    </div>
    {% if not is_self %}
    {% include 'snippets/follow_button.html' with user=user %}
    {% endif %}

    {% if is_self and user.follower_requests.all %}
    <div class="follow-requests">
        <h2>Follow Requests</h2>
        {% for requester in user.follower_requests.all %}
            <div class="row shrink">
                <p>
                    {% include 'snippets/username.html' with user=requester show_full=True %}
                </p>
                {% include 'snippets/follow_request_buttons.html' with user=requester %}
            </div>
        {% endfor %}
    </div>
    {% endif %}
</div>

